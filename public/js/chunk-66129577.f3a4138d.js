(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66129577"],{"198f":function(n,e,t){"use strict";t.r(e);var r=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"container-fluid"},[n._m(0),t("div",{staticClass:"cmd-main-menu"},[t("div",[n._v("Workspace: "),t("strong",[n._v(n._s(n.currentWs))])]),t("div",[n._v(" Running status: "),t("strong",[null!==n.running?[n._v(" "+n._s(n.running?n.running+"%":"idle")+" ")]:[n._v(" no info ")]],2)]),n._l(n.commands,(function(e){return t("div",{key:e.value,staticClass:"cmd"},[t("b-button",{staticClass:"svtrain-cmd-btn",class:"stop"===e.value?"btn-stop-command":"btn-command",attrs:{disabled:!!n.isLoading[e.value]||"stop"===e.value&&!n.running||"stop"!==e.value&&!!n.running},on:{click:function(t){return n.runCommand(e.value)}}},[t("v-icon",{attrs:{name:"stop"===e.value?"stop":"play"}}),n._v(" "+n._s(e.label)+" ")],1),n.isLoading[e.value]?t("span",[n._v("Running...")]):n._e(),n.logs[e.value]&&n.logs[e.value].lastLine?t("pre",{staticClass:"log-line",staticStyle:{"padding-left":"10px"},domProps:{innerHTML:n._s(n.logs[e.value].lastLine)},on:{click:function(t){return n.openLogsFor(e.value)}}}):n._e(),n._v(" "),t("div",{staticStyle:{clear:"both"}})],1)}))],2)])},a=[function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"title-container"},[t("div",[t("h4",[n._v("SVTrain v0.10")])])])}],s=t("1fd3"),o={name:"Train",mixins:[s["a"]],data:function(){return{commands:[{value:"train",label:"Run train batch"},{value:"stop",label:"Stop running train"}]}}},c=o,i=t("2877"),u=Object(i["a"])(c,r,a,!1,null,null,null);e["default"]=u.exports},"1fd3":function(n,e,t){"use strict";t("99af"),t("4160"),t("159b"),t("96cf");var r=t("1da1"),a=t("5530"),s=t("2f62"),o=t("7c15"),c=t("29b2");e["a"]={data:function(){return{isLoading:{statistic:!1,train:!1,test:!1,validate:!1,export:!1,stop:!1,ExportImages:!1},logs:{},running:null,workspace:null,checkInterval:750,commands:[]}},computed:Object(a["a"])({},Object(s["b"])(["currentWs"])),methods:{openLogsFor:function(n){window.open("/logs/".concat(n,"?sessionToken=").concat(localStorage.getItem("sessionToken")))},checkStatus:function(){var n=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].getRunningState();case 2:t=e.sent,n.running=t,console.log("Running status:",t);case 5:case"end":return e.stop()}}),e)})))()},checkWorkspace:function(){var n=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].getWorkspace();case 2:t=e.sent,n.workspace=t,console.log("Workspace: ".concat(n.workspace));case 5:case"end":return e.stop()}}),e)})))()},runCommand:function(n){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading[n]=!0,t.prev=1,t.next=4,o["a"].runCommand(n);case 4:return t.next=6,e.checkStatus();case 6:t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log(t.t0),console.error("An error occurred!");case 12:e.isLoading[n]=!1,console.log("Command ".concat(n," executed"));case 14:case"end":return t.stop()}}),t,null,[[1,8]])})))()}},created:function(){var n=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.sessionUser=localStorage.getItem("sessionUser"),n.checkStatus(),n.checkWorkspace(),e.next=5,o["a"].getLastLogs();case 5:n.logs=e.sent,c["a"].subscibeForFolder("running.lock",(function(e){console.log("running.lock: ",e),"unlink"===e.event&&(n.running=!1),"change"===e.event&&(n.running=e.content)})),c["a"].subscibeForFolder("workspace.bat",(function(e){console.log("workspace.bat: ",e),"unlink"===e.event&&(n.workspace=!1),"change"===e.event&&(n.workspace=e.content)})),c["a"].subscribe("logfile",(function(e){e.forEach((function(e){n.logs[e.file].lastLine=e.lastLine}))}));case 9:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:c["a"].unsubscribeForFolder("running.lock"),c["a"].unsubscribeForFolder("workspace.bat");case 2:case"end":return n.stop()}}),n)})))()}}}}]);
//# sourceMappingURL=chunk-66129577.f3a4138d.js.map