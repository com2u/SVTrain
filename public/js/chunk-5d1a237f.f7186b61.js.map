{"version":3,"sources":["webpack:///./src/views/Main.vue?a8bc","webpack:///./src/views/Main.vue?9519","webpack:///src/views/Main.vue","webpack:///./src/views/Main.vue?7343","webpack:///./src/views/Main.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","gotoWorkspace","_v","running","_s","workspace","$event","$router","push","isLoading","statistic","calculateStatistic","_e","_l","command","key","staticStyle","runCommand","logs","lastLine","domProps","openLogsFor","staticRenderFns","data","train","test","validate","export","stop","ExportImages","checkInterval","commands","sessionUser","methods","checkStatus","api","runstatus","console","checkWorkspace","window","logout","localStorage","name","created","socket","obj","beforeDestroy","component"],"mappings":"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","file":"js/chunk-5d1a237f.f7186b61.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=style&index=0&id=4d1cc649&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container-fluid\"},[_c('div',{staticClass:\"title-container\"},[_c('div'),_c('div',[_c('b-button',{attrs:{\"variant\":\"dark\"},on:{\"click\":_vm.gotoWorkspace}},[_vm._v(\"Workspace List\")])],1)]),_c('ul',{staticClass:\"main-menu\"},[_c('li',[_vm._v(\" Running status: \"),(_vm.running !== null)?[_vm._v(\" \"+_vm._s(_vm.running ? (_vm.running + \"%\") : 'idle')+\" \")]:[_vm._v(\" no info \")]],2),_c('li',[_vm._v(\" Workspace: \"),(_vm.workspace !== null)?[_vm._v(\" \"+_vm._s(_vm.workspace)+\" \")]:[_vm._v(\" no info \")]],2),_c('li',[_c('b-button',{attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.$router.push('explorer')}}},[_c('v-icon',{attrs:{\"name\":\"folder-open\"}}),_vm._v(\" Train data \")],1)],1),_c('li',[_c('b-button',{attrs:{\"variant\":\"primary\",\"disabled\":_vm.isLoading.statistic},on:{\"click\":function($event){return _vm.calculateStatistic()}}},[_c('v-icon',{attrs:{\"name\":\"calculator\"}}),_vm._v(\" Calculate statistic \")],1),(_vm.isLoading.statistic)?_c('span',[_vm._v(\"Calculating...\")]):_vm._e()],1),_vm._l((_vm.commands),function(command){return _c('li',{key:command},[_c('b-button',{staticStyle:{\"float\":\"left\"},attrs:{\"variant\":command === 'stop' ? 'danger' : 'success',\"disabled\":!!_vm.isLoading[command] || command === 'stop' && !_vm.running || command !== 'stop' && !!_vm.running},on:{\"click\":function($event){return _vm.runCommand(command)}}},[_c('v-icon',{attrs:{\"name\":command === 'stop' ? 'stop' : 'play'}}),_vm._v(\" Run \"+_vm._s(command)+\".bat \")],1),(_vm.isLoading[command])?_c('span',[_vm._v(\"Running...\")]):_vm._e(),(_vm.logs[command] && _vm.logs[command].lastLine)?_c('pre',{staticClass:\"log-line\",staticStyle:{\"padding-left\":\"10px\"},domProps:{\"innerHTML\":_vm._s(_vm.logs[command].lastLine)},on:{\"click\":function($event){return _vm.openLogsFor(command)}}}):_vm._e(),_vm._v(\" \"),_c('div',{staticStyle:{\"clear\":\"both\"}})],1)})],2),_c('hr')])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container-fluid\">\n    <div class=\"title-container\">\n      <div></div>\n      <div>\n        <b-button variant=\"dark\" @click=\"gotoWorkspace\">Workspace List</b-button>\n      </div>\n    </div>\n    <ul class=\"main-menu\">\n      <li>\n        Running status:\n        <template v-if=\"running !== null\">\n          {{ running ? `${running}%` : 'idle' }}\n        </template>\n        <template v-else>\n          no info\n        </template>\n      </li>\n\n      <li>\n        Workspace:\n        <template v-if=\"workspace !== null\">\n          {{ workspace }}\n        </template>\n        <template v-else>\n          no info\n        </template>\n      </li>\n\n      <li>\n        <b-button\n          variant=\"primary\"\n          v-on:click=\"$router.push('explorer')\">\n          <v-icon name=\"folder-open\"/>\n          Train data\n        </b-button>\n      </li>\n\n      <li>\n        <b-button\n          variant=\"primary\"\n          v-bind:disabled=\"isLoading.statistic\"\n          v-on:click=\"calculateStatistic()\">\n          <v-icon name=\"calculator\"/>\n          Calculate statistic\n        </b-button>\n        <span v-if=\"isLoading.statistic\">Calculating...</span>\n      </li>\n\n      <li v-for=\"command in commands\" v-bind:key=\"command\">\n        <b-button\n          style=\"float: left\"\n          v-bind:variant=\"command === 'stop' ? 'danger' : 'success'\"\n          v-bind:disabled=\"!!isLoading[command] || command === 'stop' && !running || command !== 'stop' && !!running\"\n          v-on:click=\"runCommand(command)\">\n          <v-icon v-bind:name=\"command === 'stop' ? 'stop' : 'play'\"/>\n          Run {{command}}.bat\n        </b-button>\n        <span v-if=\"isLoading[command]\">Running...</span>\n        <pre\n          style=\"padding-left: 10px\"\n          v-if=\"logs[command] && logs[command].lastLine\"\n          class=\"log-line\"\n          @click=\"openLogsFor(command)\"\n          v-html=\"logs[command].lastLine\"/>\n        <div style=\"clear: both\"/>\n      </li>\n    </ul>\n    <hr>\n\n  </div>\n</template>\n\n<script>\nimport api from '../utils/api'\nimport socket from '../utils/socket.js'\n\nexport default {\n  data: () => ({\n    isLoading: {\n      statistic: false,\n      train: false,\n      test: false,\n      validate: false,\n      export: false,\n      stop: false,\n      ExportImages: false,\n    },\n    running: null,\n    workspace: null,\n    checkInterval: 750,\n    logs: {},\n    commands: [\n      'train',\n      'test',\n      'validate',\n      'export',\n      'ExportImages',\n      'stop',\n    ],\n    sessionUser: '',\n  }),\n  methods: {\n    async checkStatus() {\n      const runstatus = await api.getRunningState()\n      this.running = runstatus\n      console.log('Running status:', runstatus)\n    },\n    async checkWorkspace() {\n      this.workspace = await api.getWorkspace()\n      console.log(`Workspace: ${this.workspace}`)\n    },\n    async runCommand(command) {\n      this.isLoading[command] = true\n      try {\n        await api.runCommand(command)\n        await this.checkStatus()\n      } catch (e) {\n        console.log(e)\n        console.error('An error occurred!')\n      }\n      this.isLoading[command] = false\n      console.log(`Command ${command} executed`)\n    },\n    async calculateStatistic() {\n      this.isLoading.statistic = true\n      try {\n        await api.calculateStatistic()\n      } catch (e) {\n        console.log(e)\n        console.error('An error occurred!')\n      }\n      this.isLoading.statistic = false\n      console.log('Calculate statistic process started')\n    },\n    openLogsFor(command) {\n      window.open(`/logs/${command}?sessionToken=${localStorage.getItem('sessionToken')}`)\n    },\n    logout() {\n      localStorage.removeItem('sessionToken')\n      api.setSessionToken('')\n      this.$router.push({ name: 'LoginPage' })\n    },\n    gotoWorkspace() {\n      this.$router.push({ name: 'WorkSpacePage' })\n    },\n  },\n  async created() {\n    this.sessionUser = localStorage.getItem('sessionUser')\n    this.checkStatus()\n    this.checkWorkspace()\n    this.logs = await api.getLastLogs()\n    socket.subscibeForFolder('running.lock', (data) => {\n      console.log('running.lock: ', data)\n      if (data.event === 'unlink') this.running = false\n      if (data.event === 'change') this.running = data.content\n    })\n    socket.subscibeForFolder('workspace.bat', (data) => {\n      console.log('workspace.bat: ', data)\n      if (data.event === 'unlink') this.workspace = false\n      if (data.event === 'change') this.workspace = data.content\n    })\n\n    socket.subscribe('logfile', (obj) => {\n      obj.forEach((o) => {\n        this.logs[o.file].lastLine = o.lastLine\n      })\n    })\n  },\n  async beforeDestroy() {\n    socket.unsubscribeForFolder('running.lock')\n    socket.unsubscribeForFolder('workspace.bat')\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n  .main-menu {\n    list-style: none;\n    background: #fff;\n\n    li {\n      margin-top: 10px;\n      margin-bottom: 10px;\n    }\n\n    .alert {\n      cursor: pointer;\n    }\n\n    .log-line {\n      cursor: pointer;\n      text-decoration: underline;\n\n      &:hover {\n        text-decoration: none;\n      }\n    }\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Main.vue?vue&type=template&id=4d1cc649&scoped=true&\"\nimport script from \"./Main.vue?vue&type=script&lang=js&\"\nexport * from \"./Main.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Main.vue?vue&type=style&index=0&id=4d1cc649&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4d1cc649\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}